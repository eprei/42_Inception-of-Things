<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>My notes</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>My notes</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_glossary">1. Glossary</a></li>
<li><a href="#_documentation">2. Documentation</a></li>
<li><a href="#_cheat_sheet">3. Cheat sheet</a>
<ul class="sectlevel2">
<li><a href="#_ingress">3.1. Ingress</a></li>
</ul>
</li>
<li><a href="#_journal">4. Journal</a>
<ul class="sectlevel2">
<li><a href="#_try_to_use_qemu_instead_of_virtual_box">4.1. Try to use qemu instead of virtual box</a></li>
<li><a href="#_install_virtualbox_on_archlinux">4.2. Install virtualbox on archlinux</a></li>
<li><a href="#_launch_vagrant">4.3. Launch vagrant</a></li>
<li><a href="#_add_an_environment_variable_to_the_vagrantfile">4.4. Add an environment variable to the vagrantfile</a></li>
<li><a href="#_connect_over_ssh">4.5. Connect over SSH</a></li>
<li><a href="#_get_the_sshd_config">4.6. Get the sshd config</a></li>
<li><a href="#_setup_a_vps">4.7. Setup a VPS</a></li>
<li><a href="#_vps_user">4.8. VPS user</a></li>
<li><a href="#_try_to_install_k3s_on_cenos">4.9. Try to install k3s on CenOS</a></li>
<li><a href="#_k3s_server_and_agent">4.10. K3S : Server and Agent</a></li>
<li><a href="#_troubleshooting_vagrant_up_take_times">4.11. Troubleshooting: vagrant up take times</a></li>
<li><a href="#_try_steps_manualy">4.12. Try steps manualy</a></li>
<li><a href="#_how_access_to_a_vagrant_service">4.13. How access to a vagrant service</a></li>
<li><a href="#_ingress_file">4.14. Ingress file</a></li>
</ul>
</li>
<li><a href="#_meetings">5. Meetings</a>
<ul class="sectlevel2">
<li><a href="#_cyber_reunion">5.1. Cyber reunion</a></li>
</ul>
</li>
<li><a href="#_resources">6. Resources</a>
<ul class="sectlevel2">
<li><a href="#_claude">6.1. Claude</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_glossary">1. Glossary</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">VXLAN</dt>
<dd>
<p><a href="https://en.wikipedia.org/wiki/Virtual_Extensible_LAN">Virtual Extensible LAN</a></p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_documentation">2. Documentation</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Launch machines</p>
<div class="listingblock">
<div class="content">
<pre>vagrant up</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cheat_sheet">3. Cheat sheet</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_ingress">3.1. Ingress</h3>
<div class="paragraph">
<p>Useful commands to check the status of the “ingress controller”</p>
</div>
<div class="paragraph">
<p>Check the status of the pods to see if the ingress controller is online.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl get pods --namespace ingress-nginx</pre>
</div>
</div>
<div class="paragraph">
<p>Check to see if the service is online. This of type NodePort, so do you have an EXTERNAL-IP?</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl get services --namespace ingress-nginx</pre>
</div>
</div>
<div class="paragraph">
<p>Check out the ingressclass nginx.
Ingresses we will need specify an ingressclassname</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl describe ingressclasses nginx</pre>
</div>
</div>
<div class="paragraph">
<p>Get the status of the ingress.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl get ingress --watch # Wait for the Address of intress-path to be populated before proceeding
kubectl get services --namespace ingress-nginx
kubectl describe ingress</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_journal">4. Journal</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_try_to_use_qemu_instead_of_virtual_box">4.1. Try to use qemu instead of virtual box</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Replace virtualbox with qemu in <code>p1/Vagrantfile</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-patch" data-lang="patch">    ...
-   control.vm.provider "virtualbox" do |vb|
-           vb.memory = "512"
+   control.vm.provider "qemu" do |qe|
+           qe.memory = "512"
    ...</code></pre>
</div>
</div>
</li>
<li>
<p>Install libvirt plugin with vagrant</p>
<div class="listingblock">
<div class="content">
<pre>vagrant plugin install vagrant-libvrt
vagrant plugin install libvrt</pre>
</div>
</div>
<div class="paragraph">
<p>but I receive this error message</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Vagrant failed to load a configured plugin source. This can be caused
by a variety of issues including: transient connectivity issues, proxy
filtering rejecting access to a configured plugin source, or a configured
plugin source not responding correctly. Please review the error message
below to help resolve the issue:

  Net::OpenTimeout: Failed to open TCP connection to gems.hashicorp.com:443 (execution expired) (https://gems.hashicorp.com/specs.4.8.gz)

Source: https://gems.hashicorp.com/</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_install_virtualbox_on_archlinux">4.2. Install virtualbox on archlinux</h3>
<div class="paragraph">
<p>Install "virtualbox-host-modules-arch" for my Arch Linux</p>
</div>
<div class="paragraph">
<p>Install virtualbox plugin</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vagrant plugin install virtualbox</pre>
</div>
</div>
<div class="paragraph">
<p>+
I receive this</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre>The provider 'virtualbox' that was requested to back the machine
'epresa-cS' is reporting that it isn't usable on this system. The
reason is shown below:

VirtualBox is complaining that the kernel module is not loaded. Please
run `VBoxManage --version` or open the VirtualBox GUI to see the error
message which should contain instructions on how to fix this error.</pre>
</div>
</div>
<div class="paragraph">
<p>I reboot my computer to load the <code>vboxdrv</code> kernel module</p>
</div>
</div>
<div class="sect2">
<h3 id="_launch_vagrant">4.3. Launch vagrant</h3>
<div class="listingblock">
<div class="content">
<pre>vagrant up</pre>
</div>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ vagrant up
Bringing machine 'epresa-cS' up with 'virtualbox' provider...
Bringing machine 'epresa-cSW' up with 'virtualbox' provider...
==&gt; epresa-cS: Box 'centos/7' could not be found. Attempting to find and install...
    epresa-cS: Box Provider: virtualbox
    epresa-cS: Box Version: &gt;= 0
==&gt; epresa-cS: Loading metadata for box 'centos/7'
    epresa-cS: URL: https://vagrantcloud.com/api/v2/vagrant/centos/7
==&gt; epresa-cS: Adding box 'centos/7' (v2004.01) for provider: virtualbox
    epresa-cS: Downloading: https://vagrantcloud.com/centos/boxes/7/versions/2004.01/providers/virtualbox/unknown/vagrant.box
Download redirected to host: cloud.centos.org
    epresa-cS: Calculating and comparing box checksum...
==&gt; epresa-cS: Successfully added box 'centos/7' (v2004.01) for 'virtualbox'!
==&gt; epresa-cS: Preparing master VM for linked clones...
    epresa-cS: This is a one time operation. Once the master VM is prepared,
    epresa-cS: it will be used as a base for linked clones, making the creation
    epresa-cS: of new VMs take milliseconds on a modern system.
==&gt; epresa-cS: Importing base box 'centos/7'...
==&gt; epresa-cS: Cloning VM...
==&gt; epresa-cS: Matching MAC address for NAT networking...
==&gt; epresa-cS: Checking if box 'centos/7' version '2004.01' is up to date...
==&gt; epresa-cS: Setting the name of the VM: Server
==&gt; epresa-cS: Clearing any previously set network interfaces...
==&gt; epresa-cS: Preparing network interfaces based on configuration...
    epresa-cS: Adapter 1: nat
    epresa-cS: Adapter 2: hostonly
==&gt; epresa-cS: Forwarding ports...
    epresa-cS: 22 (guest) =&gt; 2222 (host) (adapter 1)
==&gt; epresa-cS: Running 'pre-boot' VM customizations...
==&gt; epresa-cS: Booting VM...
==&gt; epresa-cS: Waiting for machine to boot. This may take a few minutes...
    epresa-cS: SSH address: 127.0.0.1:2222
    epresa-cS: SSH username: vagrant
    epresa-cS: SSH auth method: private key
    epresa-cS:
    epresa-cS: Vagrant insecure key detected. Vagrant will automatically replace
    epresa-cS: this with a newly generated keypair for better security.
    epresa-cS:
    epresa-cS: Inserting generated public key within guest...
    epresa-cS: Removing insecure key from the guest if it's present...
    epresa-cS: Key inserted! Disconnecting and reconnecting using new SSH key...
==&gt; epresa-cS: Machine booted and ready!
==&gt; epresa-cS: Checking for guest additions in VM...
    epresa-cS: No guest additions were detected on the base box for this VM! Guest
    epresa-cS: additions are required for forwarded ports, shared folders, host only
    epresa-cS: networking, and more. If SSH fails on this machine, please install
    epresa-cS: the guest additions and repackage the box to continue.
    epresa-cS:
    epresa-cS: This is not an error message; everything may continue to work properly,
    epresa-cS: in which case you may ignore this message.
==&gt; epresa-cS: Setting hostname...
==&gt; epresa-cS: Configuring and enabling network interfaces...
==&gt; epresa-cS: Running provisioner: shell...
    epresa-cS: Running: /tmp/vagrant-shell20240817-2566-lsaow1.sh
    epresa-cS: bootstrapping server...
==&gt; epresa-cSW: Box 'centos/7' could not be found. Attempting to find and install...
    epresa-cSW: Box Provider: virtualbox
    epresa-cSW: Box Version: &gt;= 0
==&gt; epresa-cSW: Loading metadata for box 'centos/7'
    epresa-cSW: URL: https://vagrantcloud.com/api/v2/vagrant/centos/7
==&gt; epresa-cSW: Adding box 'centos/7' (v2004.01) for provider: virtualbox
==&gt; epresa-cSW: Cloning VM...
==&gt; epresa-cSW: Matching MAC address for NAT networking...
==&gt; epresa-cSW: Checking if box 'centos/7' version '2004.01' is up to date...
==&gt; epresa-cSW: Setting the name of the VM: ServerWorker
==&gt; epresa-cSW: Fixed port collision for 22 =&gt; 2222. Now on port 2200.
==&gt; epresa-cSW: Clearing any previously set network interfaces...
==&gt; epresa-cSW: Preparing network interfaces based on configuration...
    epresa-cSW: Adapter 1: nat
    epresa-cSW: Adapter 2: hostonly
==&gt; epresa-cSW: Forwarding ports...
    epresa-cSW: 22 (guest) =&gt; 2200 (host) (adapter 1)
==&gt; epresa-cSW: Running 'pre-boot' VM customizations...
==&gt; epresa-cSW: Booting VM...
==&gt; epresa-cSW: Waiting for machine to boot. This may take a few minutes...
    epresa-cSW: SSH address: 127.0.0.1:2200
    epresa-cSW: SSH username: vagrant
    epresa-cSW: SSH auth method: private key
    epresa-cSW:
    epresa-cSW: Vagrant insecure key detected. Vagrant will automatically replace
    epresa-cSW: this with a newly generated keypair for better security.
    epresa-cSW:
    epresa-cSW: Inserting generated public key within guest...
    epresa-cSW: Removing insecure key from the guest if it's present...
    epresa-cSW: Key inserted! Disconnecting and reconnecting using new SSH key...
==&gt; epresa-cSW: Machine booted and ready!
==&gt; epresa-cSW: Checking for guest additions in VM...
    epresa-cSW: No guest additions were detected on the base box for this VM! Guest
    epresa-cSW: additions are required for forwarded ports, shared folders, host only
    epresa-cSW: networking, and more. If SSH fails on this machine, please install
    epresa-cSW: the guest additions and repackage the box to continue.
    epresa-cSW:
    epresa-cSW: This is not an error message; everything may continue to work properly,
    epresa-cSW: in which case you may ignore this message.
==&gt; epresa-cSW: Setting hostname...
==&gt; epresa-cSW: Configuring and enabling network interfaces...
==&gt; epresa-cSW: Running provisioner: shell...
    epresa-cSW: Running: /tmp/vagrant-shell20240817-2566-2sojqr.sh
    epresa-cSW: bootstrapping serverWorker...</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_add_an_environment_variable_to_the_vagrantfile">4.4. Add an environment variable to the vagrantfile</h3>
<div class="paragraph">
<p>Resource: <a href="https://www.ryanchapin.com/using-environment-variables-in-a-vagrant-file/">Using Environment Variables in a Vagrant File</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-patch" data-lang="patch">-  control.vm.hostname =  ENV['WHOAMI']
+  control.vm.hostname = "epresa-cS"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Add environment variable</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ echo $WHOAMI
epresa-cS</pre>
</div>
</div>
<div class="paragraph">
<p>But got this after <code>vagrant up</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>Vagrant failed to initialize at a very early stage:

There was an error loading a Vagrantfile. The file being loaded
and the error message are shown below. This is usually caused by
an invalid or undefined variable.

Path: /opt/vagrant/embedded/gems/gems/vagrant-2.4.1/plugins/kernel_v2/config/vm.rb
Line number: 0
Message: undefined method `to_sym'</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_connect_over_ssh">4.5. Connect over SSH</h3>
<div class="paragraph">
<p>Launch</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vagrant up</pre>
</div>
</div>
<div class="paragraph">
<p>Connect with</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vagrant ssh epresa-cS
vagrant ssh epresa-cSW</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_get_the_sshd_config">4.6. Get the sshd config</h3>
<div class="paragraph">
<p>After to be connected to the machine, I print the sshd config</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[vagrant@epresa-cS ~]$ sudo cat  /etc/ssh/sshd_config  | grep -v "^#" | grep -v "^$"
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
HostKey /etc/ssh/ssh_host_ed25519_key
SyslogFacility AUTHPRIV
AuthorizedKeysFile      .ssh/authorized_keys
PasswordAuthentication no
ChallengeResponseAuthentication no
GSSAPIAuthentication yes
GSSAPICleanupCredentials no
UsePAM yes
X11Forwarding yes
UseDNS no
AcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES
AcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT
AcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE
AcceptEnv XMODIFIERS
Subsystem       sftp    /usr/libexec/openssh/sftp-server</pre>
</div>
</div>
<div class="paragraph">
<p>And print the public ssh key</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[vagrant@epresa-cS ~]$ cat ~/.ssh/authorized_keys
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOWG7FyvvixzfNOgf6pR2IgNqjtBlGO06bnVAmTIp/XD vagrant</pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s interresting, because we can understand that vagrant create automaticly ssh keys for the connection</p>
</div>
</div>
<div class="sect2">
<h3 id="_setup_a_vps">4.7. Setup a VPS</h3>
<div class="paragraph">
<p>I discover a nice feature, <a href="https://en.wikipedia.org/wiki/Wake-on-LAN">Wake-on-LAN</a></p>
</div>
<div class="paragraph">
<p>resouce: <a href="https://wiki.archlinux.org/title/Wake-on-LAN#On_the_same_LAN">arch wiki</a></p>
</div>
<div class="paragraph">
<p>Got my mate public key with</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl https://github.com/${USERNAME}.keys</pre>
</div>
</div>
<div class="paragraph">
<p>I choosed Arch linux as VPS ditribution because I am use to with this one.
And I want to know what is the best between arch and debian&#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_vps_user">4.8. VPS user</h3>
<div class="listingblock">
<div class="content">
<pre>[theo@iot ~]$ vagrant plugin install virtualbox
Installing the 'virtualbox' plugin. This can take a few minutes...
Vagrant failed to properly resolve required dependencies. These
errors can commonly be caused by misconfigured plugin installations
or transient network issues. The reported error is:

conflicting dependencies bigdecimal (= 3.1.3) and bigdecimal (= 3.1.8)
  Activated bigdecimal-3.1.8
  which does not match conflicting dependency (= 3.1.3)

  Conflicting dependency chains:
    bigdecimal (= 3.1.8), 3.1.8 activated

  versus:
    bigdecimal (= 3.1.3)

  Gems matching bigdecimal (= 3.1.3):
    bigdecimal-3.1.3</pre>
</div>
</div>
<div class="paragraph">
<p>Configure the firewall to avoid trouble from my mates
(avoid any ping to other devices)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">ufw deny out to 192.168.1.0/24 # my LAN
ufw allow out to 192.168.1.1 # gateway
ufw default allow outgoing # get access to the web</code></pre>
</div>
</div>
<div class="paragraph">
<p>Result</p>
</div>
<div class="listingblock">
<div class="content">
<pre>[root@iot ~]# ufw status verbose
Status: active
Logging: on (low)
Default: allow (incoming), allow (outgoing), disabled (routed)
New profiles: skip

To                         Action      From
--                         ------      ----
11960/tcp                  LIMIT IN    Anywhere                   # ssh

192.168.1.0/24             DENY OUT    Anywhere
192.168.1.1                ALLOW OUT   Anywhere</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_try_to_install_k3s_on_cenos">4.9. Try to install k3s on CenOS</h3>
<div class="listingblock">
<div class="content">
<pre>[vagrant@epresa-cS ~]$ curl -sfL https://get.k3s.io | sh -
[INFO]  Finding release for channel stable
[INFO]  Using v1.30.3+k3s1 as release
[INFO]  Downloading hash https://github.com/k3s-io/k3s/releases/download/v1.30.3+k3s1/sha256sum-amd64.txt
[INFO]  Downloading binary https://github.com/k3s-io/k3s/releases/download/v1.30.3+k3s1/k3s
[INFO]  Verifying binary download
[INFO]  Installing k3s to /usr/local/bin/k3s
[INFO]  Finding available k3s-selinux versions
Loaded plugins: fastestmirror
Determining fastest mirrors
Could not retrieve mirrorlist http://mirrorlist.centos.org/?release=7&amp;arch=x86_64&amp;repo=os&amp;infra=vag error was
14: curl#6 - "Could not resolve host: mirrorlist.centos.org; Unknown error"


 One of the configured repositories failed (Unknown),
 and yum doesn't have enough cached data to continue. At this point the only
 safe thing yum can do is fail. There are a few ways to work "fix" this:

     1. Contact the upstream for the repository and get them to fix the problem.

     2. Reconfigure the baseurl/etc. for the repository, to point to a working
        upstream. This is most often useful if you are using a newer
        distribution release than is supported by the repository (and the
        packages for the previous distribution release still work).

     3. Run the command with the repository temporarily disabled
            yum --disablerepo=&lt;repoid&gt; ...

     4. Disable the repository permanently, so yum won't use it by default. Yum
        will then just ignore the repository until you permanently enable it
        again or use --enablerepo for temporary usage:

            yum-config-manager --disable &lt;repoid&gt;
        or
            subscription-manager repos --disable=&lt;repoid&gt;

     5. Configure the failing repository to be skipped, if it is unavailable.
        Note that yum will try to contact the repo. when it runs most commands,
        so will have to try and fail each time (and thus. yum will be be much
        slower). If it is a very temporary problem though, this is often a nice
        compromise:

            yum-config-manager --save --setopt=&lt;repoid&gt;.skip_if_unavailable=true

Cannot find a valid baseurl for repo: base/7/x86_64</pre>
</div>
</div>
<div class="paragraph">
<p>CenOS is yet deprecated (see <a href="https://rockylinux.org/about">rocky linux about</a>) so we changed for Debian.</p>
</div>
</div>
<div class="sect2">
<h3 id="_k3s_server_and_agent">4.10. K3S : Server and Agent</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Resource: <a href="https://docs.k3s.io/installation/configuration#configuration-with-install-script">Configuration with install script</a></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>First machine (Server)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -sfL https://get.k3s.io | INSTALL_K3S_EXEC="server" sh -s - --flannel-backend none --token "mypassword"</pre>
</div>
</div>
<div class="paragraph">
<p>Second machine (ServerWorker)</p>
</div>
<div class="listingblock">
<div class="content">
<pre>curl -sfL https://get.k3s.io | INSTALL_K3S_EXEC="agent" K3S_TOKEN="mypassword" sh -s - --server https://192.168.56.110</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_troubleshooting_vagrant_up_take_times">4.11. Troubleshooting: vagrant up take times</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>resource: robin gave me this <a href="https://youtu.be/JLnjMCRLcCo?t=240">video and time</a></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The first machine (server) has good installed, but the second (agent) take much time.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>I connect to the agent with ssh</p>
</li>
<li>
<p>Kill the k3s process</p>
<div class="listingblock">
<div class="content">
<pre>sudo kill $(pgrep k3s)</pre>
</div>
</div>
</li>
<li>
<p>Check the command (value of <code>ExecStart=</code>) from <code>/etc/systemd/system/k3s-agent.service</code></p>
<div class="listingblock">
<div class="content">
<pre>tail /etc/systemd/system/k3s-agent.service</pre>
</div>
</div>
</li>
<li>
<p>Run it</p>
<div class="listingblock">
<div class="content">
<pre>vagrant@theoSW:~$ sudo /usr/local/bin/k3s agent '--server' 'https://192.168.56.110' --flannel-iface 'eth1' --token mypassword
INFO[0000] Found ip 192.168.56.111 from iface eth1
INFO[0000] Starting k3s agent v1.30.3+k3s1 (f6466040)
INFO[0000] Adding server to load balancer k3s-agent-load-balancer: 192.168.56.110:443
INFO[0000] Running load balancer k3s-agent-load-balancer 127.0.0.1:6444 -&gt; [192.168.56.110:443] [default: 192.168.56.110:443]
ERRO[0000] failed to get CA certs: Get "https://127.0.0.1:6444/cacerts": read tcp 127.0.0.1:42446-&gt;127.0.0.1:6444: read: connection reset by peer
...
ERRO[0004] failed to get CA certs: Get "https://127.0.0.1:6444/cacerts": read tcp 127.0.0.1:52174-&gt;127.0.0.1:6444: read: connection reset by peer</pre>
</div>
</div>
</li>
<li>
<p>Run it with debug flag</p>
<div class="listingblock">
<div class="content">
<pre>vagrant@theoSW:~$ sudo /usr/local/bin/k3s agent '--server' 'https://192.168.56.110' --flannel-iface 'eth1' --token mypassword --debug
INFO[0000] Found ip 192.168.56.111 from iface eth1
INFO[0000] Starting k3s agent v1.30.3+k3s1 (f6466040)
INFO[0000] Adding server to load balancer k3s-agent-load-balancer: 192.168.56.110:443
INFO[0000] Running load balancer k3s-agent-load-balancer 127.0.0.1:6444 -&gt; [192.168.56.110:443] [default: 192.168.56.110:443]
DEBU[0000] Supervisor proxy using supervisor=https://127.0.0.1:6444 apiserver=https://127.0.0.1:6444 lb=true
DEBU[0000] Dial error from load balancer k3s-agent-load-balancer after 560.311µs: dial tcp 192.168.56.110:443: connect: connection refused
DEBU[0000] Health checks for all servers in load balancer k3s-agent-load-balancer have failed: retrying with health checks ignored
DEBU[0000] Dial error from load balancer k3s-agent-load-balancer after 642.917µs: dial tcp 192.168.56.110:443: connect: connection refused
DEBU[0000] Incoming conn 127.0.0.1:43070, error dialing load balancer servers: all servers failed
ERRO[0000] failed to get CA certs: Get "https://127.0.0.1:6444/cacerts": EOF</pre>
</div>
</div>
</li>
<li>
<p>Connect to the server and try to precise the <code>eth1</code> as nic with flannel-iface&#8217;s flag</p>
<div class="listingblock">
<div class="content">
<pre>vagrant@theoS:~$ sudo /usr/local/bin/k3s server '--flannel-backend' 'none' '--token' 'mypassword' --flannel-iface 'eth1'
INFO[0000] Found ip 192.168.56.110 from iface eth1
INFO[0000] Starting k3s v1.30.3+k3s1 (f6466040)
INFO[0000] Configuring sqlite3 database connection pooling: maxIdleConns=2, maxOpenConns=0, connMaxLifetime=0s
INFO[0000] Configuring database table schema and indexes, this may take a moment...
INFO[0000] Database tables and indexes are up to date
INFO[0000] Kine available at unix://kine.sock
INFO[0000] Reconciling bootstrap data between datastore and disk
INFO[0000] certificate CN=k3s,O=k3s signed by CN=k3s-server-ca@1724327973: notBefore=2024-08-22 11:59:33 +0000 UTC notAfter=2025-08-22 12:35:50 +0000 UTC
INFO[0000] Running kube-apiserver --advertise-address=192.168.56.110 --advertise-port=6443 --allow-privileged=true --anonymous-auth=false --api-audiences=https://kubernetes.default.svc.cluster.local,k3s --authorization-mode=Node,RBAC --bind-address=127.0.0.1 --cert-dir=/var/lib/rancher/k3s/server/tls/temporary-certs --client-ca-file=/var/lib/rancher/k3s/server/tls/client-ca.crt --egress-selector-config-file=/var/lib/rancher/k3s/server/etc/egress-selector-config.yaml --enable-admission-plugins=NodeRestriction --enable-aggregator-routing=true --enable-bootstrap-token-auth=true --etcd-servers=unix://kine.sock --kubelet-certificate-authority=/var/lib/rancher/k3s/server/tls/server-ca.crt --kubelet-client-certificate=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.crt --kubelet-client-key=/var/lib/rancher/k3s/server/tls/client-kube-apiserver.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --profiling=false --proxy-client-cert-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.crt --proxy-client-key-file=/var/lib/rancher/k3s/server/tls/client-auth-proxy.key --requestheader-allowed-names=system:auth-proxy --requestheader-client-ca-file=/var/lib/rancher/k3s/server/tls/request-header-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6444 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/rancher/k3s/server/tls/service.key --service-account-signing-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --service-node-port-range=30000-32767 --storage-backend=etcd3 --tls-cert-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.crt --tls-cipher-suites=TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305,TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 --tls-private-key-file=/var/lib/rancher/k3s/server/tls/serving-kube-apiserver.key
INFO[0000] Running kube-scheduler --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --bind-address=127.0.0.1 --kubeconfig=/var/lib/rancher/k3s/server/cred/scheduler.kubeconfig --leader-elect=false --profiling=false --secure-port=10259
INFO[0000] Running kube-controller-manager --allocate-node-cidrs=true --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --bind-address=127.0.0.1 --cluster-cidr=10.42.0.0/16 --cluster-signing-kube-apiserver-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kube-apiserver-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-client-cert-file=/var/lib/rancher/k3s/server/tls/client-ca.nochain.crt --cluster-signing-kubelet-client-key-file=/var/lib/rancher/k3s/server/tls/client-ca.key --cluster-signing-kubelet-serving-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-kubelet-serving-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --cluster-signing-legacy-unknown-cert-file=/var/lib/rancher/k3s/server/tls/server-ca.nochain.crt --cluster-signing-legacy-unknown-key-file=/var/lib/rancher/k3s/server/tls/server-ca.key --configure-cloud-routes=false --controllers=*,tokencleaner,-service,-route,-cloud-node-lifecycle --kubeconfig=/var/lib/rancher/k3s/server/cred/controller.kubeconfig --leader-elect=false --profiling=false --root-ca-file=/var/lib/rancher/k3s/server/tls/server-ca.crt --secure-port=10257 --service-account-private-key-file=/var/lib/rancher/k3s/server/tls/service.current.key --service-cluster-ip-range=10.43.0.0/16 --use-service-account-credentials=true
INFO[0000] Waiting for API server to become available
I0822 12:35:50.319443    2535 options.go:221] external host was not specified, using 192.168.56.110
I0822 12:35:50.324932    2535 server.go:156] Version: v1.30.3+k3s1
I0822 12:35:50.325384    2535 server.go:158] "Golang settings" GOGC="" GOMAXPROCS="" GOTRACEBACK=""
I0822 12:35:50.362436    2535 plugins.go:157] Loaded 12 mutating admission controller(s) successfully in the following order: NamespaceLifecycle,LimitRanger,ServiceAccount,NodeRestriction,TaintNodesByCondition,Priority,DefaultTolerationSeconds,DefaultStorageClass,StorageObjectInUseProtection,RuntimeClass,DefaultIngressClass,MutatingAdmissionWebhook.
I0822 12:35:50.371712    2535 shared_informer.go:313] Waiting for caches to sync for node_authorizer
INFO[0000] Running cloud-controller-manager --allocate-node-cidrs=true --authentication-kubeconfig=/var/lib/rancher/k3s/server/cred/cloud-controller.kubeconfig --authorization-kubeconfig=/var/lib/rancher/k3s/server/cred/cloud-controller.kubeconfig --bind-address=127.0.0.1 --cloud-config=/var/lib/rancher/k3s/server/etc/cloud-config.yaml --cloud-provider=k3s --cluster-cidr=10.42.0.0/16 --configure-cloud-routes=false --controllers=*,-route --feature-gates=CloudDualStackNodeIPs=true --kubeconfig=/var/lib/rancher/k3s/server/cred/cloud-controller.kubeconfig --leader-elect=false --leader-elect-resource-name=k3s-cloud-controller-manager --node-status-update-frequency=1m0s --profiling=false
I0822 12:35:50.371757    2535 shared_informer.go:313] Waiting for caches to sync for *generic.policySource[*k8s.io/api/admissionregistration/v1.ValidatingAdmissionPolicy,*k8s.io/api/admissionregistration/v1.ValidatingAdmissionPolicyBinding,k8s.io/apiserver/pkg/admission/plugin/policy/validating.Validator]
I0822 12:35:50.372801    2535 plugins.go:160] Loaded 13 validating admission controller(s) successfully in the following order: LimitRanger,ServiceAccount,PodSecurity,Priority,PersistentVolumeClaimResize,RuntimeClass,CertificateApproval,CertificateSigning,ClusterTrustBundleAttest,CertificateSubjectRestriction,ValidatingAdmissionPolicy,ValidatingAdmissionWebhook,ResourceQuota.
I0822 12:35:50.388170    2535 instance.go:299] Using reconciler: lease
INFO[0000] Server node token is available at /var/lib/rancher/k3s/server/token
INFO[0000] To join server node to cluster: k3s server -s https://10.0.2.15:6443 -t ${SERVER_NODE_TOKEN}
INFO[0000] Agent node token is available at /var/lib/rancher/k3s/server/agent-token
INFO[0000] To join agent node to cluster: k3s agent -s https://10.0.2.15:6443 -t ${AGENT_NODE_TOKEN}
INFO[0000] Wrote kubeconfig /etc/rancher/k3s/k3s.yaml
INFO[0000] Run: k3s kubectl
I0822 12:35:50.418509    2535 handler.go:286] Adding GroupVersion apiextensions.k8s.io v1 to ResourceManager
W0822 12:35:50.418856    2535 genericapiserver.go:733] Skipping API apiextensions.k8s.io/v1beta1 because it has no resources.
INFO[0001] Waiting to retrieve agent configuration; server is not ready: starting
I0822 12:35:51.221117    2535 handler.go:286] Adding GroupVersion  v1 to ResourceManager
I0822 12:35:51.277037    2535 instance.go:696] API group "internal.apiserver.k8s.io" is not enabled, skipping.
W0822 12:35:51.363648    2535 reflector.go:547] storage/cacher.go:/horizontalpodautoscalers: failed to list *autoscaling.HorizontalPodAutoscaler: rpc error: code = Unavailable desc = error reading from server: EOF
E0822 12:35:51.363719    2535 cacher.go:475] cacher (horizontalpodautoscalers.autoscaling): unexpected ListAndWatch error: failed to list *autoscaling.HorizontalPodAutoscaler: rpc error: code = Unavailable desc = error reading from server: EOF; reinitializing...
INFO[0011] Password verified locally for node theos
INFO[0011] certificate CN=theos signed by CN=k3s-server-ca@1724327973: notBefore=2024-08-22 11:59:33 +0000 UTC notAfter=2025-08-22 12:36:01 +0000 UTC
INFO[0012] certificate CN=system:node:theos,O=system:nodes signed by CN=k3s-client-ca@1724327973: notBefore=2024-08-22 11:59:33 +0000 UTC notAfter=2025-08-22 12:36:01 +0000 UTC
INFO[0012] Module overlay was already loaded
INFO[0012] Module nf_conntrack was already loaded
INFO[0012] Module br_netfilter was already loaded
INFO[0012] Module iptable_nat was already loaded
INFO[0012] Module iptable_filter was already loaded
INFO[0012] Logging containerd to /var/lib/rancher/k3s/agent/containerd/containerd.log
INFO[0012] Running containerd -c /var/lib/rancher/k3s/agent/etc/containerd/config.toml -a /run/k3s/containerd/containerd.sock --state /run/k3s/containerd --root /var/lib/rancher/k3s/agent/containerd
INFO[0013] containerd is now running
INFO[0013] Creating k3s-cert-monitor event broadcaster
INFO[0013] Connecting to proxy                           url="wss://127.0.0.1:6443/v1-k3s/connect"
INFO[0013] Running kubelet --address=0.0.0.0 --allowed-unsafe-sysctls=net.ipv4.ip_forward,net.ipv6.conf.all.forwarding --anonymous-auth=false --authentication-token-webhook=true --authorization-mode=Webhook --cgroup-driver=cgroupfs --client-ca-file=/var/lib/rancher/k3s/agent/client-ca.crt --cloud-provider=external --cluster-dns=10.43.0.10 --cluster-domain=cluster.local --container-runtime-endpoint=unix:///run/k3s/containerd/containerd.sock --containerd=/run/k3s/containerd/containerd.sock --eviction-hard=imagefs.available&lt;5%,nodefs.available&lt;5% --eviction-minimum-reclaim=imagefs.available=10%,nodefs.available=10% --fail-swap-on=false --feature-gates=CloudDualStackNodeIPs=true --healthz-bind-address=127.0.0.1 --hostname-override=theos --kubeconfig=/var/lib/rancher/k3s/agent/kubelet.kubeconfig --kubelet-cgroups=/k3s --node-ip=192.168.56.110 --node-labels= --pod-manifest-path=/var/lib/rancher/k3s/agent/pod-manifests --read-only-port=0 --resolv-conf=/etc/resolv.conf --serialize-image-pulls=false --tls-cert-file=/var/lib/rancher/k3s/agent/serving-kubelet.crt --tls-private-key-file=/var/lib/rancher/k3s/agent/serving-kubelet.key
INFO[0013] Handling backend connection request [theos]
INFO[0013] Remotedialer connected to proxy               url="wss://127.0.0.1:6443/v1-k3s/connect"
ERRO[0013] Sending HTTP 503 response to 127.0.0.1:58444: runtime core not ready
INFO[0013] Running kube-proxy --cluster-cidr=10.42.0.0/16 --conntrack-max-per-core=0 --conntrack-tcp-timeout-close-wait=0s --conntrack-tcp-timeout-established=0s --healthz-bind-address=127.0.0.1 --hostname-override=theos --kubeconfig=/var/lib/rancher/k3s/agent/kubeproxy.kubeconfig --proxy-mode=iptables
E0822 12:36:03.526041    2535 server.go:1051] "Failed to retrieve node info" err="apiserver not ready"
E0822 12:36:04.696468    2535 server.go:1051] "Failed to retrieve node info" err="apiserver not ready"
E0822 12:36:07.053314    2535 server.go:1051] "Failed to retrieve node info" err="apiserver not ready"
E0822 12:36:11.095738    2535 server.go:1051] "Failed to retrieve node info" err="apiserver not ready"
Error: problem initializing API group "batch" : context deadline exceeded
ERRO[0021] apiserver exited: problem initializing API group "batch" : context deadline exceeded</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Environment file are in <code>/etc/systemd/system/k3s.service.env</code> or in <code>/etc/systemd/system/k3s-agent.service.env</code>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Try to curl</p>
<div class="listingblock">
<div class="content">
<pre>vagrant@theoSW:~$ curl https://127.0.0.1:6444/cacerts
curl: (60) SSL certificate problem: self-signed certificate
More details here: https://curl.se/docs/sslcerts.html

curl failed to verify the legitimacy of the server and therefore could not
establish a secure connection to it. To learn more about this situation and
how to fix it, please visit the web page mentioned above.
vagrant@theoSW:~$ curl --insecure https://127.0.0.1:6444/cacerts
404 page not found
vagrant@theoSW:~$ curl --insecure https://127.0.0.1:6445/index.html
curl: (7) Failed to connect to 127.0.0.1 port 6445 after 0 ms: Couldn't connect to server</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>I think that <code>cacerts</code> does not exist</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vagrant@theoSW:~$ curl --insecure https://192.168.56.110:6443/cacerts
-----BEGIN CERTIFICATE-----
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
-----END CERTIFICATE-----</pre>
</div>
</div>
<div class="paragraph">
<p>I retried with port in server flag</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vagrant@theoSW:~$ sudo /usr/local/bin/k3s agent '--server' 'https://192.168.56.110:6443' --flannel-iface 'eth1' --token mypassword --debug
INFO[0000] Found ip 192.168.56.111 from iface eth1
INFO[0000] Starting k3s agent v1.30.3+k3s1 (f6466040)
INFO[0000] Adding server to load balancer k3s-agent-load-balancer: 192.168.56.110:6443
INFO[0000] Running load balancer k3s-agent-load-balancer 127.0.0.1:6444 -&gt; [192.168.56.110:6443] [default: 192.168.56.110:6443]
DEBU[0000] Supervisor proxy using supervisor=https://127.0.0.1:6444 apiserver=https://127.0.0.1:6444 lb=true
ERRO[0000] failed to get CA certs: Get "https://127.0.0.1:6444/cacerts": read tcp 127.0.0.1:36370-&gt;127.0.0.1:6444: read: connection reset by peer
WARN[0002] Cluster CA certificate is not trusted by the host CA bundle, but the token does not include a CA hash. Use the full token from the server's node-token file to enable Cluster CA validation.
INFO[0002] Waiting to retrieve agent configuration; server is not ready: CA cert validation failed: Get "https://127.0.0.1:6444/cacerts": EOF
INFO[0009] Waiting to retrieve agent configuration; server is not ready: Get "https://127.0.0.1:6444/v1-k3s/client-ca.crt": read tcp 127.0.0.1:37912-&gt;127.0.0.1:6444: read: connection reset by peer
INFO[0035] Waiting to retrieve agent configuration; server is not ready: failed to get CA certs: Get "https://127.0.0.1:6444/cacerts": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
INFO[0042] Waiting to retrieve agent configuration; server is not ready: failed to get CA certs: Get "https://127.0.0.1:6444/cacerts": read tcp 127.0.0.1:50090-&gt;127.0.0.1:6444: read: connection reset by peer</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_try_steps_manualy">4.12. Try steps manualy</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Remove commands in shell script provision.</p>
</li>
<li>
<p>Manipulate server manually</p>
<div class="listingblock">
<div class="content">
<pre>sudo apt update ; sudo apt install -y curl
sudo curl -Lo /usr/local/bin/k3s https://github.com/k3s-io/k3s/releases/download/v1.26.5+k3s1/k3s; sudo chmod a+x /usr/local/bin/k3s
sudo K3S_KUBECONFIG_MODE="644" K3S_TOKEN="mypassword" /usr/local/bin/k3s server --flannel-backend none --flannel-iface "eth1"</pre>
</div>
</div>
<div class="paragraph">
<p>I receive at the end this error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>E0822 14:07:19.908083    2173 kubelet.go:2475] "Container runtime network not ready" networkReady="NetworkReady=false reason:NetworkPluginNotReady message:Network plugin returns error: cni plugin not initialized"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_how_access_to_a_vagrant_service">4.13. How access to a vagrant service</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">pf</dt>
<dd>
<p>port forwarding</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Kubernetes is flexible enought that you can select your provider.</p>
</div>
<div class="paragraph">
<p>For example, I use Virtual Box, so I need to configure port forwarding with virtual box</p>
</div>
<div class="paragraph">
<p>public_ip -router pf&#8594; private_ip_server
private_ip_server -cloud provider pf&#8594; private_ip_kube</p>
</div>
</div>
<div class="sect2">
<h3 id="_ingress_file">4.14. Ingress file</h3>
<div class="paragraph">
<p>Ingress need a controller, for example <a href="https://kubernetes.github.io/ingress-nginx/user-guide/basic-usage/">ingress-nginx</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_meetings">5. Meetings</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_cyber_reunion">5.1. Cyber reunion</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>2024-08-20: 12h00 on discord</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Why CentOS ?</p>
</div>
<div class="paragraph">
<p>No particular reasons</p>
</div>
<div class="paragraph">
<p>tgrivel want to setup a VPS at home for working</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resources">6. Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Kubernetes Book (Nigel Poulton) : <a href="https://github.com/rohitg00/DevOps_Books/blob/main/The%20Kubernetes%20Book%20(Nigel%20Poulton)%20(z-lib.org).pdf" class="bare">https://github.com/rohitg00/DevOps_Books/blob/main/The%20Kubernetes%20Book%20(Nigel%20Poulton)%20(z-lib.org).pdf</a></p>
</div>
<div class="paragraph">
<p>Kubernetes Crash Course for Absolute Beginners : <a href="https://youtu.be/s_o8dwzRlu4?si=bZlrSVcJXb9QpOOD" class="bare">https://youtu.be/s_o8dwzRlu4?si=bZlrSVcJXb9QpOOD</a></p>
</div>
<div class="paragraph">
<p>Vagrant documentation : <a href="https://developer.hashicorp.com/vagrant/docs" class="bare">https://developer.hashicorp.com/vagrant/docs</a></p>
</div>
<div class="paragraph">
<p>Vagrant + K3s (vidéo en français) : <a href="https://www.youtube.com/watch?v=JLnjMCRLcCo" class="bare">https://www.youtube.com/watch?v=JLnjMCRLcCo</a></p>
</div>
<div class="paragraph">
<p>Vagrant cheat sheet : <a href="https://gist.github.com/wpscholar/a49594e2e2b918f4d0c4" class="bare">https://gist.github.com/wpscholar/a49594e2e2b918f4d0c4</a>
Pluralsight course : "Getting started with Kubernetes"</p>
</div>
<div class="paragraph">
<p>La vidéo 04 06 présente un exemple de déploiement d&#8217;une application sur un cluster kubernetes via argo cd. La vidéo 04 02 parle également de l&#8217;interaction entre k8s et argo cd.
Kubernetes Playground : <a href="https://labs.play-with-k8s.com/" class="bare">https://labs.play-with-k8s.com/</a>
<a href="https://www.youtube.com/watch?v=JLnjMCRLcCo" class="bare">https://www.youtube.com/watch?v=JLnjMCRLcCo</a>
<a href="https://portal.cloud.hashicorp.com/vagrant/discover?next=CgxXemN4TVRreU4xMD0%3D" class="bare">https://portal.cloud.hashicorp.com/vagrant/discover?next=CgxXemN4TVRreU4xMD0%3D</a>
HashiCorp Cloud Platform</p>
</div>
<div class="sect2">
<h3 id="_claude">6.1. Claude</h3>
<div class="sect3">
<h4 id="_what_is_the_diference_between_k3s_server_and_k3s_agent">what is the diference between k3s server and k3s agent ?</h4>
<div class="paragraph">
<p>The main differences between a K3s server and a K3s agent are:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Role:</p>
<div class="ulist">
<ul>
<li>
<p>K3s server: Acts as the control plane, managing the cluster state and making global decisions.</p>
</li>
<li>
<p>K3s agent: Runs workloads and communicates with the server to receive instructions.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Components:</p>
<div class="ulist">
<ul>
<li>
<p>K3s server: Runs etcd (or SQLite), API server, controller manager, and scheduler.</p>
</li>
<li>
<p>K3s agent: Runs kubelet and kube-proxy.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Deployment:</p>
<div class="ulist">
<ul>
<li>
<p>K3s server: At least one is required in a cluster, can have multiple for high availability.</p>
</li>
<li>
<p>K3s agent: Optional, used to add worker nodes to the cluster.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Resource usage:</p>
<div class="ulist">
<ul>
<li>
<p>K3s server: Generally requires more resources due to control plane components.</p>
</li>
<li>
<p>K3s agent: Typically lighter on resource usage.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configuration:</p>
<div class="ulist">
<ul>
<li>
<p>K3s server: Requires more configuration options for cluster management.</p>
</li>
<li>
<p>K3s agent: Simpler configuration, mainly needs the server URL to join the cluster.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Would you like me to elaborate on any of these points or provide more information about K3s architecture?</p>
</div>
</div>
<div class="sect3">
<h4 id="_but_kubernetes_has_the_same_options">but kubernetes has the same options?</h4>
<div class="paragraph">
<p>You&#8217;re right to ask about the comparison with standard Kubernetes. While K3s and standard Kubernetes share many concepts, there are some key differences:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Simplification:</p>
<div class="ulist">
<ul>
<li>
<p>K3s: Simplifies the server/agent distinction. A single binary can act as either server or agent.</p>
</li>
<li>
<p>Kubernetes: Has a more complex architecture with separate components like kube-apiserver, kube-scheduler, etc.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Resource footprint:</p>
<div class="ulist">
<ul>
<li>
<p>K3s: Designed to be lightweight, with a smaller memory and CPU footprint.</p>
</li>
<li>
<p>Kubernetes: Generally requires more resources, especially for the control plane.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Installation and setup:</p>
<div class="ulist">
<ul>
<li>
<p>K3s: Offers a simpler installation process, often with a single command.</p>
</li>
<li>
<p>Kubernetes: Typically involves a more complex setup process.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Default configurations:</p>
<div class="ulist">
<ul>
<li>
<p>K3s: Comes with sensible defaults and built-in features like local storage provider.</p>
</li>
<li>
<p>Kubernetes: Requires more manual configuration and add-ons.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Use case focus:</p>
<div class="ulist">
<ul>
<li>
<p>K3s: Targets edge computing, IoT, and resource-constrained environments.</p>
</li>
<li>
<p>Kubernetes: Designed for a broader range of use cases, including large-scale deployments.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>While K3s and Kubernetes share the server (control plane) and agent (worker) concepts, K3s simplifies this architecture to make it more accessible and lightweight. This is particularly useful for smaller deployments or resource-constrained environments.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</body>
</html>